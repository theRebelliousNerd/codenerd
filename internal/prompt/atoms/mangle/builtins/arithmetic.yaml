# AUTOGENERATED FROM MARKDOWN: this file was converted from a .md atom doc
# Source: builtins/arithmetic.md

- id: "language/mangle/docs/builtins/arithmetic"
  category: "language"
  subcategory: "mangle"
  description: "Mangle Arithmetic Functions"
  priority: 30
  is_mandatory: false
  languages: ["/mangle"]
  content: |
    # Mangle Arithmetic Functions
    
    Complete reference for all arithmetic functions in Mangle.
    
    ## Integer Arithmetic
    
    ### fn:plus
    
    **Signature:** `fn:plus(Int, Int, ...) -> Int`
    
    **Description:** Adds two or more integers. Supports variable number of arguments.
    
    **Parameters:**
    - One or more arguments of type `Type<int>`
    - Returns sum as `Type<int>`
    
    **Examples:**
    
    ```mangle
    # Basic addition
    X = fn:plus(1, 2).        # X = 3
    
    # Multiple arguments
    Y = fn:plus(1, 2, 3, 4).  # Y = 10
    
    # In a rule
    result(Sum) :- value(A), value(B), Sum = fn:plus(A, B).
    
    # Negative numbers
    Z = fn:plus(5, -3).       # Z = 2
    ```
    
    **Common Mistakes:**
    - ❌ Using lowercase `fn:Plus` - function names are case-sensitive
    - ❌ Mixing int and float types - use `fn:float:plus` for floats
    - ❌ Using with strings - will cause type error
    
    ---
    
    ### fn:minus
    
    **Signature:** `fn:minus(Int, Int, ...) -> Int`
    
    **Description:** Subtracts integers. With one argument, returns negation. With multiple arguments, subtracts sequentially from left to right.
    
    **Parameters:**
    - One or more arguments of type `Type<int>`
    - Returns difference as `Type<int>`
    
    **Behavior:**
    - Single argument: returns unary minus (negation)
    - Multiple arguments: `fn:minus(a, b, c)` = `a - b - c`
    
    **Examples:**
    
    ```mangle
    # Basic subtraction
    X = fn:minus(5, 3).       # X = 2
    
    # Unary minus (negation)
    Y = fn:minus(5).          # Y = -5
    
    # Multiple arguments
    Z = fn:minus(10, 3, 2).   # Z = 5 (10 - 3 - 2)
    
    # In a rule
    difference(D) :- start(A), end(B), D = fn:minus(B, A).
    ```
    
    **Common Mistakes:**
    - ❌ Expecting `fn:minus()` with no args to work - requires at least 1 argument
    - ❌ Confusing order with multiple arguments - it's left-to-right subtraction
    
    ---
    
    ### fn:mult
    
    **Signature:** `fn:mult(Int, Int, ...) -> Int`
    
    **Description:** Multiplies two or more integers.
    
    **Parameters:**
    - One or more arguments of type `Type<int>`
    - Returns product as `Type<int>`
    
    **Examples:**
    
    ```mangle
    # Basic multiplication
    X = fn:mult(3, 4).        # X = 12
    
    # Multiple arguments
    Y = fn:mult(2, 3, 4).     # Y = 24
    
    # With zero
    Z = fn:mult(5, 0).        # Z = 0
    
    # In a rule
    area(Area) :- width(W), height(H), Area = fn:mult(W, H).
    ```
    
    **Common Mistakes:**
    - ❌ Overflow not checked - large numbers may wrap around
    
    ---
    
    ### fn:div
    
    **Signature:** `fn:div(Int, Int, ...) -> Int`
    
    **Description:** Integer division. Divides integers and truncates toward zero.
    
    **Parameters:**
    - One or more arguments of type `Type<int>`
    - Returns quotient as `Type<int>` (truncated)
    
    **Behavior:**
    - Single argument: returns `1 / arg` (usually 0 unless arg is 1)
    - Multiple arguments: `fn:div(a, b, c)` = `a / b / c`
    - Division by zero raises error
    
    **Examples:**
    
    ```mangle
    # Basic division
    X = fn:div(10, 3).        # X = 3 (integer division)
    
    # Exact division
    Y = fn:div(10, 2).        # Y = 5
    
    # Single argument
    Z = fn:div(1).            # Z = 1
    W = fn:div(2).            # W = 0 (1/2 in integer arithmetic)
    
    # Multiple arguments
    Q = fn:div(100, 5, 2).    # Q = 10 (100 / 5 / 2)
    ```
    
    **Common Mistakes:**
    - ❌ Division by zero - causes runtime error
    - ❌ Expecting decimal results - use `fn:float:div` for floating-point division
    - ❌ Negative division behavior - follows truncation toward zero
    
    ---
    
    ### fn:mod
    
    **Note:** `fn:mod` is NOT currently implemented in Mangle's builtin functions (as of v0.4.0). Use `fn:minus` and `fn:mult` with `fn:div` to compute modulo manually if needed.
    
    **Manual Modulo Pattern:**
    ```mangle
    # mod(X, Y) = X - (X / Y) * Y
    remainder(R) :-
      value(X),
      divisor(Y),
      Q = fn:div(X, Y),
      Product = fn:mult(Q, Y),
      R = fn:minus(X, Product).
    ```
    
    ---
    
    ## Floating-Point Arithmetic
    
    ### fn:float:plus
    
    **Signature:** `fn:float:plus(Float64, Float64, ...) -> Float64`
    
    **Description:** Adds floating-point numbers.
    
    **Parameters:**
    - One or more arguments of type `Type<float64>` or `Type<int>` (auto-converted)
    - Returns sum as `Type<float64>`
    
    **Examples:**
    
    ```mangle
    # Basic float addition
    X = fn:float:plus(1.5, 2.3).        # X = 3.8
    
    # Multiple arguments
    Y = fn:float:plus(1.0, 2.0, 3.5).   # Y = 6.5
    
    # Mixing int and float (ints converted to float)
    Z = fn:float:plus(1.5, 2).          # Z = 3.5
    ```
    
    **Common Mistakes:**
    - ❌ Expecting exact decimal arithmetic - floating-point has precision limits
    
    ---
    
    ### fn:float:mult
    
    **Signature:** `fn:float:mult(Float64, Float64, ...) -> Float64`
    
    **Description:** Multiplies floating-point numbers.
    
    **Parameters:**
    - One or more arguments of type `Type<float64>` or `Type<int>`
    - Returns product as `Type<float64>`
    
    **Examples:**
    
    ```mangle
    # Basic float multiplication
    X = fn:float:mult(2.5, 4.0).        # X = 10.0
    
    # Multiple arguments
    Y = fn:float:mult(2.0, 3.0, 0.5).   # Y = 3.0
    ```
    
    ---
    
    ### fn:float:div
    
    **Signature:** `fn:float:div(Float64, Float64, ...) -> Float64`
    
    **Description:** Floating-point division.
    
    **Parameters:**
    - One or more arguments of type `Type<float64>` or `Type<int>`
    - Returns quotient as `Type<float64>`
    
    **Behavior:**
    - Single argument: returns `1.0 / arg`
    - Multiple arguments: sequential division from left to right
    - Division by zero raises error
    
    **Examples:**
    
    ```mangle
    # Basic float division
    X = fn:float:div(10.0, 3.0).        # X = 3.333...
    
    # Single argument (reciprocal)
    Y = fn:float:div(4.0).              # Y = 0.25 (1 / 4)
    
    # Multiple arguments
    Z = fn:float:div(100.0, 5.0, 2.0).  # Z = 10.0
    ```
    
    ---
    
    ### fn:sqrt
    
    **Signature:** `fn:sqrt(Float64|Int) -> Float64`
    
    **Description:** Square root function. Accepts int or float64.
    
    **Parameters:**
    - Single argument of type `Type<float64>` or `Type<int>`
    - Returns square root as `Type<float64>`
    
    **Examples:**
    
    ```mangle
    # Basic square root
    X = fn:sqrt(9.0).         # X = 3.0
    
    # With integer
    Y = fn:sqrt(16).          # Y = 4.0
    
    # Non-perfect square
    Z = fn:sqrt(2.0).         # Z = 1.414...
    ```
    
    **Common Mistakes:**
    - ❌ Negative numbers produce NaN (not checked at compile time)
    - ❌ Result is always float64, even for perfect squares
    
    ---
    
    ## Type Compatibility
    
    | Function | Accepts Int | Accepts Float | Returns |
    |----------|-------------|---------------|---------|
    | `fn:plus` | ✓ | ✗ | Int |
    | `fn:minus` | ✓ | ✗ | Int |
    | `fn:mult` | ✓ | ✗ | Int |
    | `fn:div` | ✓ | ✗ | Int |
    | `fn:float:plus` | ✓ (auto-convert) | ✓ | Float64 |
    | `fn:float:mult` | ✓ (auto-convert) | ✓ | Float64 |
    | `fn:float:div` | ✓ (auto-convert) | ✓ | Float64 |
    | `fn:sqrt` | ✓ | ✓ | Float64 |
    
    ## Performance Notes
    
    - Integer arithmetic is faster than floating-point
    - Use integer operations when possible for performance
    - Division is more expensive than multiplication
    
    ## Error Conditions
    
    All division operations (`fn:div`, `fn:float:div`) will raise a runtime error on division by zero. There is no automatic handling or NaN result.
