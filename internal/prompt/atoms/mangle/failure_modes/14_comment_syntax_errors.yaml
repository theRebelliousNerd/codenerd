# AUTOGENERATED FROM MARKDOWN: this file was converted from a .md atom doc
# Source: failure_modes/14_comment_syntax_errors.md

- id: "language/mangle/docs/failure_modes/14_comment_syntax_errors"
  category: "language"
  subcategory: "mangle"
  description: "Failure Mode 14: Comment Syntax Errors"
  priority: 30
  is_mandatory: false
  languages: ["/mangle"]
  content: |
    # Failure Mode 14: Comment Syntax Errors
    
    ## Category
    Syntactic Hallucination (Basic Syntax)
    
    ## Severity
    MEDIUM - Parse errors
    
    ## Error Pattern
    Using C-style (`//`, `/* */`) or SQL-style (`--`) comments instead of Mangle's hash-based comments (`#`).
    
    ## Wrong Code
    ```mangle
    // WRONG - C++ style single-line comment
    parent(/alice, /bob).
    
    /* WRONG - C style block comment
       Multiple lines
       of comments */
    parent(/alice, /bob).
    
    -- WRONG - SQL style comment
    parent(/alice, /bob).
    
    # This is correct
    parent(/alice, /bob). // But this is WRONG - only use # at start
    
    /** WRONG - Javadoc style
      * Documentation comment
      */
    Decl parent(X.Type<n>, Y.Type<n>).
    ```
    
    ## Correct Code
    ```mangle
    # CORRECT - Hash at line start
    parent(/alice, /bob).
    
    # CORRECT - Multiple single-line comments
    # for multi-line documentation
    # use multiple hash lines
    parent(/alice, /bob).
    
    # CORRECT - Comments can appear anywhere
    Decl parent(X.Type<n>, Y.Type<n>).  # Inline comment OK
    
    # CORRECT - Comment entire sections
    # ancestor(X, Y) :- parent(X, Y).  # Commented out rule
    ```
    
    ## Detection
    - **Symptom**: Parse error mentioning `//`, `/*`, or `--`
    - **Pattern**: Using non-hash comment syntax
    - **Test**: `grep -E '//|/\*|\*/' *.mg` to find C-style comments
    - **Test**: `grep -E '^\s*--' *.mg` to find SQL comments
    
    ## Prevention
    1. **Always use `#` for comments** - Single line only
    2. **`#` must be at start of line or after whitespace**
    3. **Multi-line comments = multiple `#` lines**
    4. **No block comment syntax** - Use multiple single lines
    
    ## Quick Reference
    | Style | Syntax | Valid in Mangle? |
    |-------|--------|------------------|
    | Hash | `# comment` | ✓ YES |
    | C++ | `// comment` | ✗ NO |
    | C block | `/* comment */` | ✗ NO |
    | SQL | `-- comment` | ✗ NO |
    
    ## Training Bias Origins
    | Language | Comment Syntax | Leads to Wrong Mangle |
    |----------|----------------|----------------------|
    | C/C++/Java | `//` or `/* */` | Using these |
    | SQL | `--` | Using this |
    | Python | `#` | Correct! |
    | Shell | `#` | Correct! |
    
    ## Correct Examples
    ```mangle
    # Single line comment
    parent(/alice, /bob).
    
    # Multi-line comment block
    # explaining complex logic
    # over several lines
    ancestor(X, Y) :- parent(X, Y).
    
    # Inline comment at end of line
    Decl edge(X.Type<int>, Y.Type<int>).  # Graph edge
    
    # Section header
    # =================================
    # TRANSITIVE CLOSURE RULES
    # =================================
    reachable(X, Y) :- edge(X, Y).
    ```
