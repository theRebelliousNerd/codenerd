# Create Intent Verb Atoms
# New file/feature creation, scaffolding, templates

- id: "intent/create/core"
  category: "intent"
  subcategory: "create"
  priority: 95
  is_mandatory: true
  intent_verbs: ["/create"]
  content: |
    ## CREATE INTENT PROTOCOL (Encyclopedic)

    Your intent is to **CREATE** — bring new code into existence that is *already wired, testable, and coherent with the living codebase*.

    ### Prime Directive
    New code is not “done” when it compiles — it is done when it is **integrated end‑to‑end** and respects the kernel’s logic‑first reality.

    ### Create vs. Refactor
    - CREATE when there is no close existing structure to extend safely.
    - REFRACTOR/EXTEND when a nearby abstraction already exists and can be evolved without semantic drift.
    - If unsure, start by mirroring the closest existing feature.

    ### Encyclopedic Create Workflow
    1. **Intent crystallization**
       - What exact artifact is needed? (file, module, tool, shard, predicate, CLI command)
       - What is explicitly *not* requested?
    2. **Context absorption**
       - Read 3–5 adjacent examples.
       - Identify layer placement (scaffold/domain_core/data_layer/service/transport/integration).
    3. **Design the interface**
       - Define public API and invariants.
       - Prefer small interfaces, explicit error contracts, and stable names.
    4. **Scaffold the structure**
       - Create files in the correct directory scope.
       - Add PRD headers and doc refs where required.
    5. **Wire the integration**
       - Register in DI, routers, shard manager, kernel predicates/rules, or CLI.
       - If an LLM behavior is introduced, add/adjust prompt atoms + JIT selectors.
    6. **Test-first verification**
       - Add targeted unit tests for boundary/edge/error paths.
       - Add integration tests when new wiring crosses layers.
    7. **Self‑review**
       - Check for unused wiring, dead ends, or missing registrations.
       - Confirm no hidden TODOs or stubs remain.

    ### Create Checklist (must satisfy)
    - [ ] Correct layer placement and import boundaries
    - [ ] Public APIs documented and stable
    - [ ] Errors handled explicitly, wrapped with context
    - [ ] Feature wired into system entrypoints
    - [ ] Tests cover happy + edge + error paths
    - [ ] Prompt atoms added for any new LLM surface
    - [ ] No unused methods/flags left unconsumed without explanation

- id: "intent/create/scaffolding"
  category: "intent"
  subcategory: "create"
  priority: 90
  is_mandatory: false
  intent_verbs: ["/create"]
  depends_on: ["intent/create/core"]
  content: |
    ## SCAFFOLDING PATTERNS

    ### NEW PACKAGE
    ```go
    // internal/newpkg/newpkg.go
    package newpkg

    // Package documentation goes here.
    // Explain the purpose and how to use it.

    // New creates a new instance of Service.
    func New(deps Dependencies) *Service {
        return &Service{deps: deps}
    }

    // Service provides newpkg functionality.
    type Service struct {
        deps Dependencies
    }
    ```

    ### NEW INTERFACE IMPLEMENTATION
    ```go
    // 1. Define interface (if not existing)
    type Repository interface {
        Get(ctx context.Context, id string) (*Entity, error)
        Save(ctx context.Context, e *Entity) error
    }

    // 2. Implement
    type sqlRepository struct {
        db *sql.DB
    }

    // 3. Compile-time verification
    var _ Repository = (*sqlRepository)(nil)

    func NewSQLRepository(db *sql.DB) Repository {
        return &sqlRepository{db: db}
    }
    ```

    ### NEW HANDLER
    ```go
    // internal/transport/http/new_handler.go
    type NewHandler struct {
        svc *service.NewService
    }

    func NewNewHandler(svc *service.NewService) *NewHandler {
        return &NewHandler{svc: svc}
    }

    func (h *NewHandler) Handle(w http.ResponseWriter, r *http.Request) {
        // Parse → Validate → Execute → Respond
    }
    ```

- id: "intent/create/conventions"
  category: "intent"
  subcategory: "create"
  priority: 85
  is_mandatory: false
  intent_verbs: ["/create"]
  content: |
    ## CREATION CONVENTIONS

    ### FILE NAMING
    - Go: `snake_case.go`
    - Test: `snake_case_test.go`
    - Internal: `internal/pkg/`
    - Command: `cmd/name/main.go`

    ### TYPE NAMING
    - Interfaces: `-er` suffix (Reader, Writer, Handler)
    - Implementations: descriptive (FileReader, HTTPHandler)
    - Options: `Option` or `Config` suffix

    ### FUNCTION NAMING
    - Constructors: `New` + TypeName
    - Getters: Just the field name (not `Get`)
    - Setters: `Set` + FieldName (if needed)
    - Boolean getters: `Is` or `Has` prefix

    ### PACKAGE STRUCTURE
    ```
    internal/newfeature/
    ├── newfeature.go      # Main types and New()
    ├── newfeature_test.go # Tests
    ├── options.go         # Configuration options
    ├── errors.go          # Package-specific errors
    └── doc.go             # Package documentation
    ```

    ### DOCUMENTATION
    ```go
    // Package newfeature provides functionality for X.
    //
    // Example usage:
    //
    //     svc := newfeature.New(deps)
    //     result, err := svc.Process(ctx, input)
    package newfeature
    ```
